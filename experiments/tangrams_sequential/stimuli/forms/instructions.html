
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Experiment</title>

    <!-- Bootstrap core CSS -->
    <link href="../../lib/css/bootstrap.min.css" rel="stylesheet">
    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>


    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>

  <body role="document">
    
    <div class="container theme-showcase" role="main">

      </br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="100" style="width: 5%;"><span class="sr-only">5% Complete</span></div>
      </div>

      <div class="page-header">
        <h1>Instructions</h1>
      </div>
      
      <div class="well" style="width:800px; margin: 0 auto">

<h2><center>Matching Game</center>  </h2>

	<p> 

    In this experiment you will play a fun matching game with another turker! Both of you are going to be given a set of tangram pictures which will look like this. 
</p>
    <p>
      <center><img src="images/tangramBoard.png" alt="Example gameplay" style="width:600px;height:200px"></center>
    </p>
<p>
    You'll each see the same 12 images but they will be scrambled into different locations.
</p>

  <p>
    One of you will be assigned the <b> Director </b> role and the
    other will be the <b> Matcher</b>. On each round, the director is
    shown a <b>black box</b> marking one of the twelve objects as the
    target (see image below). Only the director can see which object
    is the target. The task of the director is to tell the matcher
    which one of the objects is the target. The matcher in turn needs
    to select the right object based on this information. You'll both
    get <b> a bonus of $0.01 for each correct response</b>, so pay
    attention! Remember that it doesn't make sense to describe the
    location of the target object, since the order of the images is
    different for the director and the matcher.
</p>

    <p>
      <center><img src="images/directorView.png" alt="Example gameplay" style="width:700px;height:413px"></center>
    </p>

    <p>
      <i> <center> <small> Only the director can see the black square around the target object. </small> </center> </i>
    </p>
    
<p>
  Thus, the goal is for the matcher to identify the correct shape
  based on what the director has said. In order to communicate,
  you're given a chatbox where you can send messages back and forth
  to each other. The director can say whatever they need to indicate
  which object is the target (this isn't a game of "taboo"!), and the
  matcher can respond or ask questions at any point. Some rounds
  will be easier and some will be harder. </p>

<p> Once the matcher clicks on the object they believe is the target,
  based on conversation through the chat box, both players will be
  given feedback (the director will see what the matcher clicked, and
  the matcher will see the true target), and you will both be
  automatically forwarded to the next round of objects. There are a
  total of <b>72 rounds</b> with the same set of objects, so each one
  will be the target several times. After the final round you will
  fill out a quick 15 second survey and be on your way.
</p>

<p> A few final notes: First, since you are playing with another
  turker, you may see this screen before the game begins:
  <p>
    <center><img src="images/waitScreen.png" alt="initial matcher's
    board" style="width:700px;height:150px"></center>
  </p>
  Just hold tight. Another turker should join the game within the next
  few minutes. If you're in the waiting room 15 minutes without
  another player joining, your HIT will automatically be submitted and
  accepted, out of gratitude for the time you spent waiting.
</p>

<p>
  Second, please be respectful of the turker you're playing with: do
  not send inappropriate material through the chat box (including
  screenshots of the shape you're trying to refer to), and try to be
  as responsive as possible.
</p>

<p> Finally, please DO NOT refresh the page at any point once you
start the game (including the waiting page). If you refresh, you will
not be able to rejoin the game you were in and you and your partner
may not be able to submit the HIT. Thank you!
</p>

<h4>
    Please fill out this short quiz below before getting started.
    Good luck and have fun! 
</h4>
	
      </div>
      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>

     <div class="well" style="width:800px; margin: 0 auto">
 
  </br>
  The director can click on a color to end the round
    </br>
    <input type="radio" name="dgoal" value="no"> True 
    </br>
    <input type="radio" name="dgoal" value="yes"> False
    </br>

  </br>
  The matcher wants to click on the target that the director is describing
      </br>
      <input type="radio" name="mgoal" value="yes"> True
      </br>
      <input type="radio" name="mgoal" value="no"> False
      </br>
    

  </br> 
  The target object is marked for the director with a black box
      </br>
      <input type="radio" name="round" value="yes"> True
      </br>
      <input type="radio" name="round" value="no"> False
      </br>

  </br> 
  Only the director can send messages 
      </br>
      <input type="radio" name="message" value="no"> True
      </br>
      <input type="radio" name="message" value="yes"> False
      </br>

  </br> 
  At the end of each round
       </br>
       <input type="radio" name="comp" value="no"> All tangrams stay in the same locations
       </br>
       <input type="radio" name="comp" value="yes"> The tangrams are shuffled
       </br>
       
  </br>
  The locations of the 12 objects are the same for the director and the matcher
        </br>
        <input type="radio" name="completed" value="no"> True
        </br>
        <input type="radio" name="completed" value="yes"> False
        </br>

  </br>
    <input id="quiz_submit" type="submit" value="Submit"> 
      </br>
      </br>
  <div class="error" style="display:none"> Ooops! Looks like you made a mistake. You have one more try. </div>
    </div> <!-- /container -->
      </div>
    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

      urlParams = {};
      while (match = search.exec(query))
      urlParams[decode(match[1])] = decode(match[2]);
      
      console.log(urlParams)

      var counter = 0;
      document.getElementById("quiz_submit").onclick = function () {
        var ans1 = $('input[name="dgoal"]:checked').val();
        var ans2 = $('input[name="mgoal"]:checked').val();
        var ans3 = $('input[name="round"]:checked').val();
        var ans4 = $('input[name="message"]:checked').val();
        var ans5 = $('input[name="comp"]:checked').val();
        var ans6 = $('input[name="completed"]:checked').val();

        if(ans1 == "yes" && ans2 == "yes" && ans3 == "yes" && 
           ans4 == "yes" && ans5 == "yes" && ans6 == "yes") {
           var workerId = urlParams.workerId;
           var assignmentId = urlParams.assignmentId;
           var hitId = urlParams.hitId;
           var turkSubmitTo = urlParams.turkSubmitTo;
           location.replace("./pass.html?workerId=" + workerId
                            + "&assignmentId=" + assignmentId
                            + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
        } else if(counter == 3) {
          location.replace("./fail.html");
        } else {
          $('.error').show()
          counter += 1;
        }
      };
    </script>
    
    <script src="./validate-form.js"></script>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->

    <script src="../../lib/js/bootstrap.min.js"></script>
  </body>
</html>
